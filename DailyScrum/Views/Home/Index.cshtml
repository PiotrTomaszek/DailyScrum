@{
    ViewData["Title"] = "Daily";
}

<div class="container-fluid">

    @* Daily Part *@
    <div class="row">
        <div class="container">
            <div id="dailyHolder" style="width:100%;background-color:bisque; overflow-y:scroll;">
                <div class="container">
                    <div class="row text-center" style="background-color:white">
                        <div class="col-4">
                            <h1>#Daily</h1>
                        </div>
                        <div class="col-5 text-left">
                            <h6>Czas rozpoczęcia: <span id="starting-time"></span></h6>
                            <h6>Pozostały czas: <span id="timer"></span></h6>
                        </div>

                        <div class="col-3 align-self-sm-center">

                            <button class="btn  align-content-center dropdown-toggle" type="button" id="dailyDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-ellipsis-h"></i>
                            </button>

                            <div class="dropdown-menu" aria-labelledby="dailyDropdown">
                                <a class="dropdown-item text-center" id="modalHolder" data-toggle="modal" data-target="#exampleModal">Dodaj post</a>
                            </div>





                        </div>
                    </div>
                </div>
                <div style="height:100%;@*overflow-y:scroll;*@">
                    <div class="container mt-5 mb-5">
                        <div class="row mt-1">
                            <div class="col-md-12 offset-lg-2 col-lg-8">
                                <div class="p-card bg-white p-2 rounded px-3 mb-1">
                                    <div class="row">
                                        <div class="col-2 col-md-1 ">
                                            <img src="@Url.Content("~/avatars/testphoto.jpg")" alt="" style="width:40px;height:40px" />
                                        </div>
                                        <div class="col-8 col-md-9 text-left">
                                            <p>Czas</p>
                                            <h6>ktos dodal post</h6>
                                        </div>
                                        <div class="col-2 col-md-2">
                                            <button class="btn text-center" type="button" data-toggle="collapse" data-target="#collapseUserTest" aria-expanded="false" aria-controls="collapseExample">
                                                <i class="fas fa-plus"></i>
                                            </button>
                                        </div>
                                    </div>

                                    @*</div>*@
                                    <div class="collapse" id="collapseUserTest" style="height:100%">
                                        <p>dwadawdada</p>
                                        <p>dwadawdada</p>
                                        <p>dwadawdada</p>
                                        <p>dwadawdada</p>
                                        <p>dwadawdada</p>
                                    </div>

                                </div>

                                <div class="p-card bg-white p-2 rounded px-3 mb-1">
                                    <div class="row">
                                        <div class="col-2 col-md-1 ">
                                            <img src="@Url.Content("~/avatars/testphoto.jpg")" alt="" style="width:40px;height:40px" />
                                        </div>
                                        <div class="col-10 col-md-11 text-left">
                                            <p>Czas</p>
                                            <h6>ktos dodal post</h6>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                @*<ul class="list-unstyled">
                        <li>

                        </li>
                    </ul>*@
            </div>
        </div>
    </div>

    <div class="row">

        @* Chat Part *@
        <div class="col-md-8 col-lg-9">
            <div>
                <div class="chat-container" id="chatHolder" style="overflow-y:scroll;">
                    <ul class="chat-box chatContainerScroll list-unstyled" id="messagesList">
                    </ul>
                </div>
            </div>
            <div class="input-group mb-3">
                <input type="text" id="messageInput" class="form-control" placeholder="Napisz wiadomość" aria-label="Recipient's username" aria-describedby="button-addon2">
                <button class="btn btn-outline-primary" type="button" id="sendButton">Wyślij</button>
            </div>
        </div>

        @* User List Part *@
        <div class="col-md-4 col-lg-3">
            <div class="card mb-sm-3 mb-md-0 contacts_card" id="usersHolder">
                <div class="card-header text-center" id="cardHeaderHolder">
                    <div class="row">

                        <h5 id="team-name"></h5>
                        @*</div>*@
                        @*<div class="col-4">
                                <button class="btn" type="button" data-toggle="collapse" data-target="#collapseUserList" aria-expanded="false" aria-controls="collapseExample">
                                    <i class="fas fa-ellipsis-h"></i>
                                </button>
                            </div>*@
                    </div>
                    <p>Online: <span id="online-team-members"></span></p>
                </div>
                <div id="cardBodyHolder">
                    <div class="card-body @*collapse*@ contacts_body" id="collapseUserList" style="overflow-y: scroll;height:100%">
                        <ul id="usersList" class="contacts list-unstyled">
                            <li>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>



<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header ">
                <h4 class="modal-title w-100 text-center" id="exampleModalLabel">Daily post</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body w-100 text-center">
                <form method="post" id="newDailyPostForm">

                    @* TODO *@

                    <h5>Co robiłeś wczoraj?</h5>
                    <input type="text" class="d-inline" value="" id="yesterdayInput" placeholder="Task" />

                    @*<input type="text" class="d-inline" value="" id="yesterdayInputNext" placeholder="Task" />*@
                    @*<button id="btn" type="button">Click Me!</button>*@

                    <h5 class="mt-5">Co zrobisz dzisiaj?</h5>
                    <input type="text" class="d-inline" value="" placeholder="Task" />

                    <h5 class="mt-5">Widzisz jakieś przeszkody na drodzę?</h5>
                    <input type="text" class="d-inline" value="" placeholder="Task" />

                </form>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Anuluj</button>
                <button type="button" class="btn btn-outline-primary" id="submitDailyPost">Akceptuj</button>
            </div>
        </div>
    </div>
</div>


@section Scripts{
    <link href="~/css/chat.css" rel="stylesheet" />

    <script src="~/js/signalr/dist/browser/signalr.min.js"></script>
    <script src="~/js/daily.js"></script>
    <script src="~/js/windowSizeCalculator.js"></script>


    @*<script>
            (function () {
                var counter = 0;
                var btn = document.getElementById('btn');
                var form = document.getElementById('newDailyPostForm');
                //var addInput = function () {
                //    counter++;
                //    var input = document.createElement("input");
                //    input.id = 'input-' + counter;
                //    input.type = 'text';
                //    input.name = 'name';
                //    input.placeholder = 'Input number ' + counter;
                //    form.appendChild(input);
                //};

                //var thisinput = document.getElementById('yesterdayInputNext');

                //thisinput.addEventListener('input', function () {
                //    counter++;
                //    debugger;
                //    var input = document.createElement("input");
                //    input.id = 'yesterdayInputNext-' + counter;
                //    input.type = 'text';
                //    input.name = 'name';
                //    input.placeholder = 'Input number ' + counter;
                //    form.appendChild(input);
                //});

                //thisinput.addEventListener('focusout', function () {

                //});

                //btn.addEventListener('click', function () {
                //    addInput();
                //}.bind(this));
            /*})();*/
        </script>
    *@

    <script>
        var element = document.getElementById('submitDailyPost');
        element.addEventListener('click', function () {
            connection.invoke("SendPost", 'dzioa').catch(function (err) {
                return console.error(err.toString());
            });

            $('#exampleModal').modal('hide');

            disableButton();
        });
        function disableButton() {
            element.disabled = true;
        }
    </script>
}
